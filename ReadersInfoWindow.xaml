<Window x:Class="biblioteka.ReadersInfoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Информация о читателях"
        Height="700" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="#121212">
    <Window.Resources>
        <!-- Тени и цвета -->
        <DropShadowEffect x:Key="CardShadow" Color="#6C5CE7" Direction="270" ShadowDepth="2" BlurRadius="5" Opacity="0.5"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#B0B0B0"/>
        <SolidColorBrush x:Key="CardBg" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="Border" Color="#333333"/>
        <SolidColorBrush x:Key="AccentColor" Color="#6C5CE7"/>
        <SolidColorBrush x:Key="OverdueColor" Color="#FF7675"/>
        <SolidColorBrush x:Key="WarningColor" Color="#FDCB6E"/>
        <SolidColorBrush x:Key="SuccessColor" Color="#00B894"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Тулбар с кнопкой печати -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0 0 0 10">
            <TextBlock Text="📚 Управление читателями"
                       FontWeight="Bold" FontSize="20"
                       Foreground="{StaticResource TextPrimary}"
                       VerticalAlignment="Center"/>

            <Button x:Name="PrintButton"
                    Content="🖨️ Печать карточки"
                    Background="{StaticResource AccentColor}"
                    Foreground="White"
                    FontSize="12"
                    FontWeight="SemiBold"
                    Height="30"
                    Margin="20,0,0,0"
                    Padding="10,0"
                    Click="PrintButton_Click"
                    Visibility="Collapsed"/>
        </StackPanel>

        <!-- Левая часть: список читателей -->
        <Border Grid.Row="1" Grid.Column="0" Background="{StaticResource CardBg}" CornerRadius="10" Padding="15" Margin="0 0 10 0"
                BorderBrush="{StaticResource Border}" BorderThickness="1">
            <StackPanel>
                <TextBlock Text="📚 Список читателей"
                           FontWeight="Bold" FontSize="18"
                           Foreground="{StaticResource TextPrimary}"
                           Margin="0 0 0 15"/>
                <ListBox x:Name="ReadersList"
                         SelectionChanged="ReadersList_SelectionChanged"
                         DisplayMemberPath="FullName"
                         BorderThickness="0"
                         Background="#252525"
                         Foreground="{StaticResource TextPrimary}"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         Height="500"/>
            </StackPanel>
        </Border>

        <!-- Правая часть: карточка читателя -->
        <Border Grid.Row="1" Grid.Column="1" Background="{StaticResource CardBg}" CornerRadius="10" Padding="20"
                BorderBrush="{StaticResource Border}" BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Заголовок -->
                <TextBlock Text="👤 Карточка читателя"
                           FontWeight="Bold" FontSize="18"
                           Foreground="{StaticResource TextPrimary}"
                           Margin="0 0 0 15"/>

                <!-- Основная информация -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel x:Name="ReaderCard" Visibility="Collapsed" Opacity="0">

                        <!-- Личная информация -->
                        <Border Background="#252525" CornerRadius="8" Padding="15" Margin="0 0 0 15">
                            <StackPanel>
                                <TextBlock Text="📋 Личная информация" 
                                           FontWeight="Bold" FontSize="14" 
                                           Foreground="{StaticResource AccentColor}" 
                                           Margin="0 0 0 10"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="ФИО:" Grid.Row="0" Grid.Column="0" 
                                               Foreground="{StaticResource TextSecondary}" 
                                               Margin="0 0 10 8"/>
                                    <TextBlock x:Name="FullNameText" Grid.Row="0" Grid.Column="1" 
                                               FontSize="14" FontWeight="SemiBold" 
                                               Foreground="{StaticResource TextPrimary}" 
                                               Margin="0 0 0 8"/>

                                    <TextBlock Text="📞 Телефон:" Grid.Row="1" Grid.Column="0" 
                                               Foreground="{StaticResource TextSecondary}" 
                                               Margin="0 0 10 8"/>
                                    <TextBlock x:Name="PhoneText" Grid.Row="1" Grid.Column="1" 
                                               FontSize="13" 
                                               Foreground="{StaticResource TextPrimary}" 
                                               Margin="0 0 0 8"/>

                                    <TextBlock Text="🎂 Дата рождения:" Grid.Row="2" Grid.Column="0" 
                                               Foreground="{StaticResource TextSecondary}" 
                                               Margin="0 0 10 8"/>
                                    <TextBlock x:Name="BirthDateText" Grid.Row="2" Grid.Column="1" 
                                               FontSize="13" 
                                               Foreground="{StaticResource TextPrimary}" 
                                               Margin="0 0 0 8"/>

                                    <TextBlock Text="📅 Дата регистрации:" Grid.Row="3" Grid.Column="0" 
                                               Foreground="{StaticResource TextSecondary}" 
                                               Margin="0 0 10 8"/>
                                    <TextBlock x:Name="RegistrationDateText" Grid.Row="3" Grid.Column="1" 
                                               FontSize="13" 
                                               Foreground="{StaticResource TextPrimary}" 
                                               Margin="0 0 0 8"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Адрес -->
                        <Border Background="#252525" CornerRadius="8" Padding="15" Margin="0 0 0 15">
                            <StackPanel>
                                <TextBlock Text="🏠 Адрес" 
                                           FontWeight="Bold" FontSize="14" 
                                           Foreground="{StaticResource AccentColor}" 
                                           Margin="0 0 0 10"/>

                                <TextBlock x:Name="AddressText" 
                                           FontSize="13" 
                                           Foreground="{StaticResource TextPrimary}" 
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>

                        <!-- Вкладки для книг -->
                        <Border Background="#252525" CornerRadius="8" Padding="15">
                            <StackPanel>
                                <TextBlock Text="📚 Книги читателя" 
                                           FontWeight="Bold" FontSize="14" 
                                           Foreground="{StaticResource AccentColor}" 
                                           Margin="0 0 0 10"/>

                                <!-- Переключатель вкладок -->
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button x:Name="CurrentBooksTab" 
                                            Content="📖 Текущие книги"
                                            Grid.Column="0"
                                            Background="#6C5CE7"
                                            Foreground="White"
                                            BorderThickness="0"
                                            Height="35"
                                            FontSize="12"
                                            Click="SwitchToCurrentBooks"/>
                                    <Button x:Name="HistoryTab" 
                                            Content="📋 История книг"
                                            Grid.Column="1"
                                            Background="#333333"
                                            Foreground="#B0B0B0"
                                            BorderThickness="0"
                                            Height="35"
                                            FontSize="12"
                                            Click="SwitchToHistory"/>
                                </Grid>

                                <!-- Список текущих книг -->
                                <ListBox x:Name="CurrentBooksList" 
                                         Height="250" 
                                         BorderThickness="0" 
                                         Background="Transparent"
                                         ScrollViewer.VerticalScrollBarVisibility="Auto">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{Binding CardColor}" 
                                                    CornerRadius="6"
                                                    BorderBrush="{StaticResource Border}" 
                                                    BorderThickness="1" 
                                                    Padding="12" 
                                                    Margin="0 0 0 8"
                                                    Effect="{StaticResource CardShadow}">
                                                <StackPanel>
                                                    <TextBlock Text="{Binding BookTitle}" 
                                                               FontWeight="Bold" 
                                                               FontSize="13" 
                                                               Foreground="{StaticResource TextPrimary}"/>
                                                    <TextBlock Text="{Binding InventoryNumber}" 
                                                               FontSize="12" 
                                                               Foreground="{StaticResource TextSecondary}"
                                                               Margin="0 2 0 0"/>
                                                    <TextBlock Text="{Binding Status}" 
                                                               Foreground="{Binding StatusColor}" 
                                                               FontSize="11"
                                                               FontWeight="SemiBold"
                                                               Margin="0 5 0 0"/>
                                                    <Button Content="Вернуть книгу"
                                                            Width="100" 
                                                            Height="28"
                                                            Background="#FF7675" 
                                                            Foreground="White"
                                                            FontSize="11"
                                                            Margin="0,8,0,0"
                                                            Click="ReturnBook_Click"
                                                            Tag="{Binding IssuedId}"/>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <!-- Список истории книг -->
                                <ListBox x:Name="HistoryBooksList" 
                                         Height="250" 
                                         BorderThickness="0" 
                                         Background="Transparent"
                                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                                         Visibility="Collapsed">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{StaticResource CardBg}" 
                                                    CornerRadius="6"
                                                    BorderBrush="{StaticResource Border}" 
                                                    BorderThickness="1" 
                                                    Padding="12" 
                                                    Margin="0 0 0 8"
                                                    Effect="{StaticResource CardShadow}">
                                                <StackPanel>
                                                    <TextBlock Text="{Binding BookTitle}" 
                                                               FontWeight="Bold" 
                                                               FontSize="13" 
                                                               Foreground="{StaticResource TextPrimary}"/>
                                                    <TextBlock Text="{Binding InventoryNumber}" 
                                                               FontSize="12" 
                                                               Foreground="{StaticResource TextSecondary}"
                                                               Margin="0 2 0 0"/>
                                                    <TextBlock Text="{Binding Status}" 
                                                               Foreground="{Binding StatusColor}" 
                                                               FontSize="11"
                                                               FontWeight="SemiBold"
                                                               Margin="0 5 0 0"/>
                                                    <TextBlock Text="{Binding ReturnInfo}" 
                                                               FontSize="10" 
                                                               Foreground="{StaticResource TextSecondary}"
                                                               Margin="0 2 0 0"/>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>

                <!-- Подсказка -->
                <TextBlock x:Name="SelectHint" Grid.Row="2"
                           Text="Выберите читателя из списка, чтобы увидеть подробную информацию"
                           Foreground="{StaticResource TextSecondary}" 
                           FontStyle="Italic"
                           FontSize="13" 
                           VerticalAlignment="Center"
                           Margin="0 20 0 0"
                           TextAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>